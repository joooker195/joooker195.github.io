<html><head><link rel="import" href="../polymer/polymer.html"></head><body><dom-module id="iron-swipeable-container"><template><style>:host{display:block;}</style><content id="content"></content></template></dom-module><script>Polymer({is:'iron-swipeable-container',properties:{swipeStyle:{type:String,value:'horizontal'},disabled:{type:Boolean,value:!1},widthRatio:{type:Number,value:3},opacityRate:{type:Number,value:0.2},transition:{type:String,value:'300ms cubic-bezier(0.4, 0.0, 0.2, 1)'}},ready:function(){this._transitionProperty='opacity, transform',this._swipeComplete=!1,this._direction=''},attached:function(){this._nodeObserver=Polymer.dom(this.$.content).observeNodes(function(a){for(var b=0;b<a.addedNodes.length;b++)this._addListeners(a.addedNodes[b]);for(var b=0;b<a.removedNodes.length;b++)this._removeListeners(a.removedNodes[b])}.bind(this))},_addListeners:function(a){a.nodeType===Node.TEXT_NODE||a.nodeType===Node.COMMENT_NODE||(a.style.transitionProperty=this._transitionProperty,a.style.transition=this.transition,this.listen(a,'track','_onTrack'),this.listen(a,'transitionend','_onTransitionEnd'))},_removeListeners:function(a){a.nodeType===Node.TEXT_NODE||(this.unlisten(a,'track','_onTrack'),this.unlisten(a,'transitionend','_onTransitionEnd'))},detached:function(){this._nodeObserver&&(Polymer.dom(this.$.content).unobserveNodes(this._nodeObserver),this._nodeObserver=null)},_onTrack:function(a){if(!this.disabled){var b=a.currentTarget;if(!b.classList.contains('disable-swipe')){var c=a.detail;'start'===c.state?this._trackStart(c,b):'track'===c.state?this._trackMove(c,b):'end'===c.state&&this._trackEnd(c,b)}}},_trackStart:function(a,b){this._nodeWidth=b.offsetWidth,b.style.transition='none'},_trackMove:function(a,b){this._animate(a.dx,b)},_trackEnd:function(a,b){this._swipeComplete=Math.abs(a.dx)>this._nodeWidth/2,this._direction=0<a.dx,this._swipeEnd(b)},_animate:function(a,b){var c=0<a?1:-1,d=this._nodeWidth*this.widthRatio,e=Math.max(0,Math.abs(a)-this._nodeWidth*this.opacityRate),f=Math.max(0,(d-e)/d);b.style.opacity=f;var g,h;if('horizontal'===this.swipeStyle)g='translate3d('+a+'px,'+0+'px,0)',h='';else{var j=d-Math.sqrt(d*d-e*e);g='translate3d('+a+'px,'+j+'px,0)',h=' rotate('+90*((1-f)*c)+'deg)'}this.transform(g+h,b)},_swipeEnd:function(a){if(a.style.transition=this.transition,this._swipeComplete){var b=this._nodeWidth*this.widthRatio;this._animate(this._direction?b:-b,a)}else this._animate(0,a)},_onTransitionEnd:function(a){var b=a.currentTarget;this._swipeComplete&&'opacity'===a.propertyName&&(Polymer.dom(this).removeChild(b),this.fire('iron-swipe',{direction:0<this._direction?'right':'left',target:b}))}});</script></body></html>